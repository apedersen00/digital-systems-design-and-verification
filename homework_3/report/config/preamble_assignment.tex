\documentclass[oneside,11pt,a4paper]{article}

%----------------------------------------------------------------------------------------
%   USER INFORMATION
%----------------------------------------------------------------------------------------
\newcommand{\assignmentTitle}{Homework 3}
\newcommand{\assignmentSubtitle}{Fall 2025}
\newcommand{\studentName}{Andreas S. Pedersen}
\newcommand{\studyID}{aspasp@kth.se}
\newcommand{\courseName}{IL2234: Digital Systems Design and Verification Using HDL}
\newcommand{\submissionDate}{\today}

%----------------------------------------------------------------------------------------
%   PAGE LAYOUT & GEOMETRY
%----------------------------------------------------------------------------------------
\usepackage{geometry}
\geometry{
    a4paper,
    left=2.5cm,
    right=2.5cm,
    top=2.5cm,
    bottom=3cm,
    headheight=14pt
}

%----------------------------------------------------------------------------------------
%   HEADERS AND FOOTERS
%----------------------------------------------------------------------------------------
\usepackage{fancyhdr}
\usepackage{lastpage}

% Define the header/footer style
\fancypagestyle{fancy}{
    \fancyhf{}
    \fancyhead[L]{\courseName}
    \fancyhead[R]{\assignmentTitle}
    \fancyfoot[R]{Page \thepage\ of \pageref{LastPage}}
    \fancyfoot[L]{\studentName}
    \renewcommand{\headrulewidth}{0.4pt}
    \renewcommand{\footrulewidth}{0pt}
}

% Apply to all pages
\pagestyle{fancy}

%----------------------------------------------------------------------------------------
%   TYPOGRAPHY & ENCODING
%----------------------------------------------------------------------------------------
\usepackage{listings}
\lstset{basicstyle=\ttfamily}
\usepackage{minted}
\usepackage[skins,minted]{tcolorbox}

\usepackage{fontspec}
\setmonofont{JetBrains Mono}

\usepackage[english]{babel}
\usepackage{csquotes}
\usepackage[normalem]{ulem}
\usepackage{lipsum}
\setlength\parindent{0pt} % No paragraph indents
\setlength\parskip{6pt}   % Space between paragraphs

\usepackage{microtype}
\DisableLigatures[<,>]{encoding=T1,family=tt*}

%----------------------------------------------------------------------------------------
%   BIBLIOGRAPHY
%----------------------------------------------------------------------------------------
\usepackage[style=ieee, backend=biber]{biblatex}
\addbibresource{config/references.bib}

%----------------------------------------------------------------------------------------
%   PACKAGES FOR FIGURES, TABLES, AND MATH
%----------------------------------------------------------------------------------------
\usepackage{graphicx}
\graphicspath{{imgs/}}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{siunitx}
\usepackage{array}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{makecell}
\usepackage{threeparttable}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{rotating}
\usepackage{tikz}
\usepackage[label=corner]{karnaugh-map}

%----------------------------------------------------------------------------------------
%   DOCUMENT STRUCTURE & FORMATTING
%----------------------------------------------------------------------------------------
\usepackage{titlesec}
\usepackage{appendix}
\usepackage{verbatim}
\usepackage{enumitem}
\usepackage[bottom]{footmisc}
\usepackage{pdfpages}
\usepackage{changepage}
\usepackage{subfiles}

\usepackage[hidelinks, colorlinks=true, linkcolor=black, citecolor=black, urlcolor=blue]{hyperref}
\usepackage[nameinlink]{cleveref}

\titleformat{\section}
  {\normalfont\Large\bfseries}
  {}
  {0em}
  {}

\titleformat{\subsection}
  {\normalfont\large\bfseries}
  {}
  {0em}
  {}

\titleformat{\subsubsection}
  {\normalfont\normalsize\itshape}
  {}
  {0em}
  {}

\titlespacing*{\section}{0pt}{1.5\baselineskip}{1\baselineskip}
\titlespacing*{\subsection}{0pt}{1\baselineskip}{0.5\baselineskip}

\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

% ------- MINTED

% Base colors
\definecolor{mintedbackground}{rgb}{0.95,0.95,0.95}
\definecolor{mintedframe}{rgb}{0.3,0.55,0.55}

% Language-specific title bar colors
\definecolor{svcolor}{rgb}{0.2,0.4,0.6}        % Blue for SystemVerilog
\definecolor{pycolor}{rgb}{0.65,0.89,0.63}     % Green for Python
\definecolor{cppcolor}{rgb}{0.8,0.4,0.2}       % Orange for C++
\definecolor{bashcolor}{rgb}{0.3,0.3,0.3}      % Dark gray for Bash/Terminal
\definecolor{textcolor}{rgb}{0.5,0.5,0.5}      % Gray for text/generic

% Base minted configuration for all languages
\setminted{
    bgcolor=mintedbackground,
    fontfamily=tt,
    linenos=true,
    numberblanklines=true,
    numbersep=5pt,
    gobble=0,
    frame=none,
    framesep=2mm,
    funcnamehighlighting=true,
    tabsize=4,
    obeytabs=false,
    mathescape=false,
    samepage=false,
    showspaces=false,
    texcl=false,
    baselinestretch=1.2,
    fontsize=\footnotesize,
    breaklines=true,
}

% Override specific settings for bash (no line numbers for commands)
\setminted[bash]{
    linenos=false,
    fontsize=\small,
    baselinestretch=1.1,
    samepage=true,
}

% SystemVerilog environment
\newtcblisting{svcode}[2][]{
    enhanced,
    listing engine=minted,
    listing only,
    minted language=systemverilog,
    colback=mintedbackground,
    colframe=svcolor,
    fonttitle=\ttfamily\footnotesize\bfseries,
    coltitle=white,
    colbacktitle=svcolor,
    sharp corners,
    boxrule=0.8pt,
    arc=2pt,
    left=12pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    toptitle=2pt,
    bottomtitle=2pt,
    lefttitle=8pt,
    righttitle=8pt,
    before skip=10pt,
    after skip=10pt,
    title=#2,
    #1
}

% Python environment  
\newtcblisting{pycode}[2][]{
    enhanced,
    listing engine=minted,
    listing only,
    minted language=python,
    colback=mintedbackground,
    colframe=pycolor,
    fonttitle=\ttfamily\footnotesize\bfseries,
    coltitle=white,
    colbacktitle=pycolor,
    sharp corners,
    boxrule=0.8pt,
    arc=2pt,
    left=12pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    toptitle=2pt,
    bottomtitle=2pt,
    lefttitle=8pt,
    righttitle=8pt,
    before skip=10pt,
    after skip=10pt,
    title=#2,
    #1
}

% C++ environment
\newtcblisting{cppcode}[2][]{
    enhanced,
    listing engine=minted,
    listing only,
    minted language=cpp,
    colback=mintedbackground,
    colframe=cppcolor,
    fonttitle=\ttfamily\footnotesize\bfseries,
    coltitle=white,
    colbacktitle=cppcolor,
    sharp corners,
    boxrule=0.8pt,
    arc=2pt,
    left=12pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    toptitle=2pt,
    bottomtitle=2pt,
    lefttitle=8pt,
    righttitle=8pt,
    before skip=10pt,
    after skip=10pt,
    title=#2,
    #1
}

% Bash environment
\newtcblisting{bashcode}[2][]{
    enhanced,
    listing engine=minted,
    listing only,
    minted language=bash,
    colback=mintedbackground,
    colframe=bashcolor,
    fonttitle=\ttfamily\footnotesize\bfseries,
    coltitle=white,
    colbacktitle=bashcolor,
    sharp corners,
    boxrule=0.8pt,
    arc=2pt,
    left=8pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    toptitle=2pt,
    bottomtitle=2pt,
    lefttitle=8pt,
    righttitle=8pt,
    before skip=10pt,
    after skip=10pt,
    title=#2,
    #1
}

% Text/terminal environment
\newtcblisting{textcode}[2][]{
    enhanced,
    listing engine=minted,
    listing only,
    minted language=text,
    colback=mintedbackground,
    colframe=textcolor,
    fonttitle=\ttfamily\footnotesize\bfseries,
    coltitle=white,
    colbacktitle=textcolor,
    sharp corners,
    boxrule=0.8pt,
    arc=2pt,
    left=12pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    toptitle=2pt,
    bottomtitle=2pt,
    lefttitle=8pt,
    righttitle=8pt,
    before skip=10pt,
    after skip=10pt,
    title=#2,
    #1
}

% Inline code commands for different languages
\newmintinline[svinline]{systemverilog}{bgcolor=mintedbackground!50, fontsize=\small}
\newmintinline[pyinline]{python}{bgcolor=mintedbackground!50, fontsize=\small}
\newmintinline[cppinline]{cpp}{bgcolor=mintedbackground!50, fontsize=\small}
\newmintinline[bashinline]{bash}{bgcolor=mintedbackground!50, fontsize=\small}
\newmintinline[textinline]{text}{bgcolor=mintedbackground!50, fontsize=\small}

% Backward compatibility aliases (deprecated - use new environments above)
\newtcblisting{cppminted}[2][]{
    enhanced,
    listing engine=minted,
    listing only,
    minted language=cpp,
    colback=mintedbackground,
    colframe=cppcolor,
    fonttitle=\ttfamily\footnotesize\bfseries,
    coltitle=white,
    colbacktitle=cppcolor,
    sharp corners,
    boxrule=0.8pt,
    arc=2pt,
    left=12pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    toptitle=2pt,
    bottomtitle=2pt,
    lefttitle=8pt,
    righttitle=8pt,
    before skip=10pt,
    after skip=10pt,
    title=#2,
    #1
}

\newtcblisting{svminted}[2][]{
    enhanced,
    listing engine=minted,
    listing only,
    minted language=systemverilog,
    colback=mintedbackground,
    colframe=svcolor,
    fonttitle=\ttfamily\footnotesize\bfseries,
    coltitle=white,
    colbacktitle=svcolor,
    sharp corners,
    boxrule=0.8pt,
    arc=2pt,
    left=12pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    toptitle=2pt,
    bottomtitle=2pt,
    lefttitle=8pt,
    righttitle=8pt,
    before skip=10pt,
    after skip=10pt,
    title=#2,
    #1
}

\newtcblisting{mintedterminal}[2][]{
    enhanced,
    listing engine=minted,
    listing only,
    minted language=text,
    colback=mintedbackground,
    colframe=textcolor,
    fonttitle=\ttfamily\footnotesize\bfseries,
    coltitle=white,
    colbacktitle=textcolor,
    sharp corners,
    boxrule=0.8pt,
    arc=2pt,
    left=12pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    toptitle=2pt,
    bottomtitle=2pt,
    lefttitle=8pt,
    righttitle=8pt,
    before skip=10pt,
    after skip=10pt,
    title=#2,
    #1
}

\newtcblisting{bashcmd}[2][]{
    enhanced,
    listing engine=minted,
    listing only,
    minted language=bash,
    colback=mintedbackground,
    colframe=bashcolor,
    fonttitle=\ttfamily\footnotesize\bfseries,
    coltitle=white,
    colbacktitle=bashcolor,
    sharp corners,
    boxrule=0.8pt,
    arc=2pt,
    left=8pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    toptitle=2pt,
    bottomtitle=2pt,
    lefttitle=8pt,
    righttitle=8pt,
    before skip=10pt,
    after skip=10pt,
    title=#2,
    #1
}

\newtcblisting{svpython}[2][]{
    enhanced,
    listing engine=minted,
    listing only,
    minted language=python,
    colback=mintedbackground,
    colframe=pycolor,
    fonttitle=\ttfamily\footnotesize\bfseries,
    coltitle=white,
    colbacktitle=pycolor,
    sharp corners,
    boxrule=0.8pt,
    arc=2pt,
    left=12pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    toptitle=2pt,
    bottomtitle=2pt,
    lefttitle=8pt,
    righttitle=8pt,
    before skip=10pt,
    after skip=10pt,
    title=#2,
    #1
}

% Backward compatibility for inline commands
\newmintinline[bashcmdline]{bash}{bgcolor=mintedbackground!50, fontsize=\small}
